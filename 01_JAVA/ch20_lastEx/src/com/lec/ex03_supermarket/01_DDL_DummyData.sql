-- DROP TABLE, SEQUENCE
DROP TABLE CUSTOMER;
DROP TABLE LEVELGRADE;
DROP SEQUENCE SUPERMARKET_CUSTOMER_SQ;

-- CREATE TABLE, SEQUENCE
CREATE TABLE LEVELGRADE(
	LEVELNO		NUMBER(2),
	LEVELNAME	VARCHAR2(50) NOT NULL,
	LOW	    NUMBER(9) NOT NULL,
	HIGH	NUMBER(9) NOT NULL,
	PRIMARY KEY(LEVELNO));

CREATE TABLE CUSTOMER(
	CID			NUMBER(4),
	CTEL		VARCHAR2(30) UNIQUE,
	CNAME		VARCHAR2(50) NOT NULL,
	CPOINT		NUMBER(9) DEFAULT 1000,
	CAMOUNT		NUMBER(9) DEFAULT 0,
	LEVELNO		NUMBER(2) DEFAULT 10 NOT NULL,
	PRIMARY KEY(CID),
	FOREIGN KEY(LEVELNO) REFERENCES LEVELGRADE(LEVELNO));
	
CREATE SEQUENCE SUPERMARKET_CUSTOMER_SQ
	MAXVALUE 9999
	NOCACHE
	NOCYCLE;
    
-- DATA INSERT
-- LEVELGRADE
-- BRONZE 0~10만원 / SILVER 10~30 / GOLD 30~50 / VIP 50~100 / VVIP 100~
INSERT INTO LEVELGRADE VALUES (10, 'BRONZE', 0, 100000);
INSERT INTO LEVELGRADE VALUES (20, 'SILVER', ㅌ100001, 300000);
INSERT INTO LEVELGRADE VALUES (30, 'GOLD', 300001, 500000);
INSERT INTO LEVELGRADE VALUES (40, 'VIP', 500001, 1000000);
INSERT INTO LEVELGRADE VALUES (50, 'VVIP', 1000001, 999999999);

SELECT * FROM LEVELGRADE;

-- CUSTOMER
INSERT INTO CUSTOMER VALUES (SUPERMARKET_CUSTOMER_SQ.NEXTVAL, '01011111111', '제니', 5000, 1000010, 50);
INSERT INTO CUSTOMER (CID, CTEL, CNAME) VALUES (SUPERMARKET_CUSTOMER_SQ.NEXTVAL, '01022222222', '로제');
INSERT INTO CUSTOMER (CID, CTEL, CNAME) VALUES (SUPERMARKET_CUSTOMER_SQ.NEXTVAL, '01033333333', '지수');
INSERT INTO CUSTOMER (CID, CTEL, CNAME) VALUES (SUPERMARKET_CUSTOMER_SQ.NEXTVAL, '01044444444', '리사');

SELECT * FROM CUSTOMER;

DELETE FROM CUSTOMER WHERE CID = 6;

COMMIT;