## [12] TRANSACTION

**💡트랜잭션(Transaction)이란?**

- 데이터베이스에서 트랜잭션(Transaction)은 데이터 처리의 한 단위이다.
- 오라클에서 발생하는 여러 개의 SQL 명령문들을 하나의 논리적인 작업 단위로 처리하는데 이를 트랜잭션이라고 한다.
- 하나의 트랜잭션은 ALL-OR-Nothing 방식으로 처리된다.
- 여러개의 명령어 집합이 정상적으로 처리되면 정상 종료하도록 하고 여러개의 명령어 중에서 하나의 명령어라도 잘못 되었다면 전체를 취소해 버린다.
- 데이터베이스에서 작업의 단위로 트랜잭션이란 개념을 도입한 이유는 데이터의 일관성을 유지하면서 안정적으로 데이터를 복구시키기 위함이다.



### 트랜잭션(Transaction) 제어 명령어

### COMMIT

- COMMIT은 모든 작업을 정상적으로 처리하겠다고 확정하는 명령어로 트랜잭션의 처리 과정을 데이터베이스에 모두 반영하기 위해서 변경된 내용을 모두 영구 저장한다.
- COMMIT 명령어를 수행하게 되면 하나의 트랜잭션 과정을 종료하게 된다.

### ROLLBACK

- 작업 중 문제가 발생되어 트랜잭션의 처리과정에서 발생한 변경사항을 취소하는 명령어
- ROLLBACK 명령어 수행 시 트랜잭션 과정을 종료하게 된다. 
- COMMIT한 곳 까지만 복구

### COMMIT 명령어과 ROLLBACK 명령어의 장점

- 데이터 무결성이 보장

- 영구적인 변경 전에 데이터의 변경 사항을 확인할 수 있다.

- 논리적으로 연관된 작업을 그룹화할 수 있다.

### SAVEPOINT

- SAVEPOINT 명령을 써서 현재의 트랜잭션을 작게 분할할 수 있다.
- 저장된 SAVEPOINT는 ROLLBACK TO SAVEPOINT 문을 사용하여 표시한 곳까지 ROLLBACK할 수 있다.
- 여러 개의 SQL 문의 실행을 수반하는 트랜잭션의 경우, 사용자가 트랜잭션 중간 단계에서 세이브포인트를 지정할 수 있다.

```sql
-- SAVEPOINT로 특정 위치를 지정
SAVEPOINT LABEL_NAME;
-- 지정해 놓은 특정 위치로 되돌아가기
ROLLBACK TO LABEL_NAME;
```

